  


<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# githubog: http://ogp.me/ns/fb/githubog#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>s3cmd modify command · Issue #37 · s3tools/s3cmd · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <link rel="logo" type="image/svg" href="http://github-media-downloads.s3.amazonaws.com/github-logo.svg" />
    <link rel="xhr-socket" href="/_sockets" />
    <meta name="msapplication-TileImage" content="/windows-tile.png" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="selected-link" value="repo_issues" data-pjax-transient />

    
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="CXoMVHdL1h0+8dXYMJ8AkB4iukqcDdj9uJbBuCpWbiQ=" name="csrf-token" />

    <link href="https://a248.e.akamai.net/assets.github.com/assets/github-a3a6f11f933fa375d623670fb32ec69840f30d25.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://a248.e.akamai.net/assets.github.com/assets/github2-3b8e07d931989eb1ce2daabb8425b30e3926a92d.css" media="all" rel="stylesheet" type="text/css" />
    


      <script src="https://a248.e.akamai.net/assets.github.com/assets/frameworks-92d138f450f2960501e28397a2f63b0f100590f0.js" type="text/javascript"></script>
      <script src="https://a248.e.akamai.net/assets.github.com/assets/github-c61ac0d3f5e48668b83430707a0fcc4976e2f1d9.js" type="text/javascript"></script>
      
      <meta http-equiv="x-pjax-version" content="07397f3779ac1985ca4215f5e8100b13">

          <meta property="og:title" content="s3cmd"/>
    <meta property="og:type" content="githubog:gitrepository"/>
    <meta property="og:url" content="https://github.com/s3tools/s3cmd"/>
    <meta property="og:image" content="https://secure.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?s=420&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png"/>
    <meta property="og:site_name" content="GitHub"/>
    <meta property="og:description" content="It would be super awesome to have something akin to a modify command that allowed changing the settings that are possible to set during upload but which don&#39;t seem to have a way to be modified later.

For instance, I&#39;d like to be able to set headers, switch to reduced redundancy, make public, etc. for JPGs that are already uploaded:

s3cmd modify \
    --add-header=&#39;Cache-Control: public, max-age=31536000&#39; \
    --reduced-redundancy \
    --cf-invalidate \
    --acl-public \
    --recursive \
    --exclu..."/>
    <meta property="twitter:card" content="summary"/>
    <meta property="twitter:site" content="@GitHub">
    <meta property="twitter:title" content="s3tools/s3cmd"/>

    <meta name="description" content="It would be super awesome to have something akin to a modify command that allowed changing the settings that are possible to set during upload but which don&#39;t seem to have a way to be modified later.

For instance, I&#39;d like to be able to set headers, switch to reduced redundancy, make public, etc. for JPGs that are already uploaded:

s3cmd modify \
    --add-header=&#39;Cache-Control: public, max-age=31536000&#39; \
    --reduced-redundancy \
    --cf-invalidate \
    --acl-public \
    --recursive \
    --exclu..." />

  <link href="https://github.com/s3tools/s3cmd/commits/master.atom" rel="alternate" title="Recent Commits to s3cmd:master" type="application/atom+xml" />

  </head>


  <body class="logged_out  windows vis-public env-production  ">
    <div id="wrapper">

      

      
      
      

      
      <div class="header header-logged-out">
  <div class="container clearfix">

      <a class="header-logo-wordmark" href="https://github.com/">Github</a>

    <div class="header-actions">
        <a class="button primary" href="https://github.com/signup">Sign up for free</a>
      <a class="button" href="https://github.com/login?return_to=%2Fs3tools%2Fs3cmd%2Fissues%2F37">Sign in</a>
    </div>

      <ul class="top-nav">
          <li class="explore"><a href="https://github.com/explore">Explore GitHub</a></li>
        <li class="search"><a href="https://github.com/search">Search</a></li>
        <li class="features"><a href="https://github.com/features">Features</a></li>
          <li class="blog"><a href="https://github.com/blog">Blog</a></li>
      </ul>

  </div>
</div>


      

      


            <div class="site hfeed" itemscope itemtype="http://schema.org/WebPage">
      <div class="hentry">
        
        <div class="pagehead repohead instapaper_ignore readability-menu ">
          <div class="container">
            <div class="title-actions-bar">
              

<ul class="pagehead-actions">



    <li>
      <a href="/login?return_to=%2Fs3tools%2Fs3cmd"
        class="minibutton js-toggler-target star-button entice tooltipped upwards"
        title="You must be signed in to use this feature" rel="nofollow">
        <span class="mini-icon mini-icon-star"></span>Star
      </a>
      <a class="social-count js-social-count" href="/s3tools/s3cmd/stargazers">
        473
      </a>
    </li>
    <li>
      <a href="/login?return_to=%2Fs3tools%2Fs3cmd"
        class="minibutton js-toggler-target fork-button entice tooltipped upwards"
        title="You must be signed in to fork a repository" rel="nofollow">
        <span class="mini-icon mini-icon-fork"></span>Fork
      </a>
      <a href="/s3tools/s3cmd/network" class="social-count">
        193
      </a>
    </li>
</ul>

              <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
                <span class="repo-label"><span>public</span></span>
                <span class="mega-icon mega-icon-public-repo"></span>
                <span class="author vcard">
                  <a href="/s3tools" class="url fn" itemprop="url" rel="author">
                  <span itemprop="title">s3tools</span>
                  </a></span> /
                <strong><a href="/s3tools/s3cmd" class="js-current-repository">s3cmd</a></strong>
              </h1>
            </div>

            
  <ul class="tabs">
    <li class="pulse-nav"><a href="/s3tools/s3cmd/pulse" class="js-selected-navigation-item " data-selected-links="pulse /s3tools/s3cmd/pulse" rel="nofollow"><span class="mini-icon mini-icon-pulse"></span></a></li>
    <li><a href="/s3tools/s3cmd" class="js-selected-navigation-item " data-selected-links="repo_source repo_downloads repo_commits repo_tags repo_branches /s3tools/s3cmd">Code</a></li>
    <li><a href="/s3tools/s3cmd/network" class="js-selected-navigation-item " data-selected-links="repo_network /s3tools/s3cmd/network">Network</a></li>
    <li><a href="/s3tools/s3cmd/pulls" class="js-selected-navigation-item " data-selected-links="repo_pulls /s3tools/s3cmd/pulls">Pull Requests <span class='counter'>16</span></a></li>

      <li><a href="/s3tools/s3cmd/issues" class="js-selected-navigation-item selected" data-selected-links="repo_issues /s3tools/s3cmd/issues">Issues <span class='counter'>56</span></a></li>

      <li><a href="/s3tools/s3cmd/wiki" class="js-selected-navigation-item " data-selected-links="repo_wiki /s3tools/s3cmd/wiki">Wiki</a></li>


    <li><a href="/s3tools/s3cmd/graphs" class="js-selected-navigation-item " data-selected-links="repo_graphs repo_contributors /s3tools/s3cmd/graphs">Graphs</a></li>


  </ul>
  
  
  
  


            
          </div>
        </div><!-- /.repohead -->

        <div id="js-repo-pjax-container" class="container context-loader-container" data-pjax-container>
          
<style type="text/css" media="screen">
  
</style>



<div id="issues_next">
  <div class="tabnav">
    <div class="tabnav-right">
      <div class="tabnav-widget search ">
        <form accept-charset="UTF-8" action="/s3tools/s3cmd/issues/search" method="get">
            <a href="/s3tools/s3cmd/issues/search" class="search-link">Search:</a>
          <span class="fieldwrap">
            <input type="text" name="q" id="js-issues-quicksearch" value=""
              placeholder="Issues &amp; Milestones&hellip;"
              data-hotkey="/"
              tabindex="1"
              autocapitalize="off"
              data-url="/s3tools/s3cmd/issues/quicksearch" /><button
                type="submit" class="minibutton empty-icon"><span class="mini-icon mini-icon-search-input"></span></button>
          </span>
          <div class="autocomplete-results"></div>
          <div class="quicksearch-loading" style="display: none">
            <a class="selected initial autocomplete-header autocomplete-item" href="/s3tools/s3cmd/issues/search">
              See all results
            </a>
          </div>
</form>      </div>
      <div class="tabnav-widget ">
        <a href="/s3tools/s3cmd/issues/new" class="button minibutton primary bigger js-new-issue-button" data-hotkey="c">New Issue</a>
      </div>
    </div>

    <ul class="tabnav-tabs">
      <li><a href="/s3tools/s3cmd/issues" class="tabnav-tab selected">Browse Issues</a></li>
      <li><a href="/s3tools/s3cmd/issues/milestones" class="tabnav-tab ">Milestones</a></li>
    </ul>
  </div>
    <div id="show_issue">

    <div class="issue-head clearfix">
      <span class="back">
        <span class="mini-icon mini-icon-arr-left"></span>
        <a href="/s3tools/s3cmd/issues" data-hotkey="u" id="to_isssues_list">Back to issue list</a>
      </span>

      <span class="number">
        Issue <strong>#37</strong>
      </span>
    </div><!-- /.issue-head -->

    <div id="discussion_bucket" class="tab-content">
      <div class="discussion-sidebar">
        <div class="discussion-stats">
  

<span class="state-indicator open">
  Open
</span>

<p>
  <strong>21</strong>
  comments
</p>

<time id="js-discussion-last-modified" datetime="Fri, 12 Apr 2013 15:51:43 GMT"></time>
<span class="js-socket-channel js-comment-channel" data-channel="s3tools/s3cmd:issue:3576604" data-url="/s3tools/s3cmd/issues/37/poll"></span>


</div>

<hr />

<div class="discussion-labels">
  <div class="label-manager">
  <strong>Labels</strong>
</div>

<ul class="color-label-list filter-list small">
  
</ul>

</div>

      </div>

      <div class="discussion-timeline">

        <div class="js-discussion">
          

<div class="discussion-bubble js-comment-container">
  <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/f449127a6da08207335f71a25daacc5f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />

  <div class="discussion-bubble-content bubble">
    <div class="discussion-bubble-inner">
      <div class="js-comment comment discussion-topic starting-comment" id="issue-3576604" data-body-version="b12ecc0956b76e288cd1cb2745c78092">

        <div class="discussion-topic-header">
          <span class="discussion-topic-author"><a href="/mckamey">mckamey</a> opened this issue <time class="js-relative-date" datetime="2012-03-08T17:47:30-08:00" title="2012-03-08 17:47:30">March 08, 2012</time></span>
          <h2 class="discussion-topic-title js-comment-body-title">s3cmd modify command</h2>
        </div> <!-- /.topic-comment-header -->

        <div class="discusion-topic-infobar js-infobar js-form-issues">
          <div class="milestone infobar-widget">
  <span class="text js-milestone-infobar-item-wrapper">
      No milestone

  </span>

</div>

<div class="assignee infobar-widget">
  <span class="css-truncate text js-assignee-infobar-item-wrapper">
      No one is assigned
  </span>

</div>
        </div> <!-- /.discusion-topic-infobar -->

        <div class="comment-content">

          <div class="edit-comment-hide">
            <div class="js-comment-body comment-body markdown-body markdown-format">
                <p>It would be super awesome to have something akin to a modify command that allowed changing the settings that are possible to set during upload but which don't seem to have a way to be modified later.</p>

<p>For instance, I'd like to be able to set headers, switch to reduced redundancy, make public, etc. for JPGs that are already uploaded:</p>

<pre><code>s3cmd modify \
    --add-header='Cache-Control: public, max-age=31536000' \
    --reduced-redundancy \
    --cf-invalidate \
    --acl-public \
    --recursive \
    --exclude '*' \
    --include '*.jpg' \
    'foo' \
    s3://foo
</code></pre>

<p>Unless I'm missing something these can be changed manually in the AWS Console, but not via s3cmd without a full delete and re-upload which may not be feasible.</p>

<p>Thanks in advance and keep up the great work!</p>
            </div>
          </div>

          

        </div> <!-- /.comment-content -->
      </div> <!-- /.comment -->
    </div> <!-- /.discussion-bubble-content -->
  </div> <!-- /.discussion-bubble-inner -->
</div> <!-- /.discussion-bubble -->


          <div class="js-socket-channel js-updatable-content"
      data-channel="s3tools/s3cmd:issue:3576604"
      data-url=/s3tools/s3cmd/issues/37/show_partial?partial=participants
    >

  <div class="pull-participation">
    <p class="quickstat"><a href="#pr_contributors_box" rel="facebox"><strong>12</strong> participants</a></p>

      <a class="avatar tooltipped downwards" title="mckamey" href="/mckamey"><img height="24" src="https://secure.gravatar.com/avatar/f449127a6da08207335f71a25daacc5f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="johnboxall" href="/johnboxall"><img height="24" src="https://secure.gravatar.com/avatar/b0d7b5d81cbc846b99976fbf3852d932?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="fgaudin" href="/fgaudin"><img height="24" src="https://secure.gravatar.com/avatar/4de376afde67e9426673e4b2d639b034?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="brandon-rhodes" href="/brandon-rhodes"><img height="24" src="https://secure.gravatar.com/avatar/424a8f03889e3ffbf9ed57adb1fc41cc?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="tszming" href="/tszming"><img height="24" src="https://secure.gravatar.com/avatar/9f80cac7135e1748d308b04e89e8bc15?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="gollyg" href="/gollyg"><img height="24" src="https://secure.gravatar.com/avatar/c8f164c8152127a9529404a356a9c67b?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="andreteves" href="/andreteves"><img height="24" src="https://secure.gravatar.com/avatar/a3ca0e247f3af73db7578f66a070992a?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="mludvig" href="/mludvig"><img height="24" src="https://secure.gravatar.com/avatar/5c6197a71320d457e44a6405dcc26e18?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="Valloric" href="/Valloric"><img height="24" src="https://secure.gravatar.com/avatar/48f306c887fd9c7b32a2fc352194e0db?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="ShepBook" href="/ShepBook"><img height="24" src="https://secure.gravatar.com/avatar/e995cc033a946947e33699751b90783f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="luk3thomas" href="/luk3thomas"><img height="24" src="https://secure.gravatar.com/avatar/a66100b528e01781b6eee8914f11667f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
      <a class="avatar tooltipped downwards" title="willrc" href="/willrc"><img height="24" src="https://secure.gravatar.com/avatar/97667222bc99d7d3591d9c6695b31129?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" /></a>
  </div>

  <div id="pr_contributors_box" style="display:none">
    <h2>People who have participated in this issue</h2>
    <ul class="facebox-user-list">
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/f449127a6da08207335f71a25daacc5f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/mckamey">mckamey</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/b0d7b5d81cbc846b99976fbf3852d932?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/johnboxall">johnboxall</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/4de376afde67e9426673e4b2d639b034?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/fgaudin">fgaudin</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/424a8f03889e3ffbf9ed57adb1fc41cc?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/brandon-rhodes">brandon-rhodes</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/9f80cac7135e1748d308b04e89e8bc15?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/tszming">tszming</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/c8f164c8152127a9529404a356a9c67b?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/gollyg">gollyg</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/a3ca0e247f3af73db7578f66a070992a?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/andreteves">andreteves</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/5c6197a71320d457e44a6405dcc26e18?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/mludvig">mludvig</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/48f306c887fd9c7b32a2fc352194e0db?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/Valloric">Valloric</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/e995cc033a946947e33699751b90783f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/ShepBook">ShepBook</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/a66100b528e01781b6eee8914f11667f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/luk3thomas">luk3thomas</a>
      </li>
      <li>
        <img height="24" src="https://secure.gravatar.com/avatar/97667222bc99d7d3591d9c6695b31129?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
        <a href="/willrc">willrc</a>
      </li>
    </ul>
  </div>
</div>



            <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/5c6197a71320d457e44a6405dcc26e18?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4408409" class="js-comment comment" data-body-version="a2d550e2cc693a554287636da1905ace">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4408409" class="comment-type-icon mini-icon mini-icon-read-note tooltipped downwards" title="This comment left via email reply."></a>
    <a href="/mludvig" class="comment-header-author">mludvig</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4408409">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4408409" class="comment-header-date"><time class="js-relative-date" datetime="2012-03-08T17:50:26-08:00" title="2012-03-08 17:50:26">March 08, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <div class="email-fragment">You can copy (s3cmd cp) the file to itself with these new settings. That
should do the trick for most changes. E.g. to make an already uploaded
private file public do:</div>
<span class="email-hidden-toggle"><a href="#">&#8230;</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">s3cmd cp --acl-public s3://bucket/blah.jpg s3://bucket/blah.jpg

Haven't tried recently but I believe it works.

Michal</div>
<div class="email-quoted-reply">On 03/09/2012 02:47 PM, Stephen McKamey wrote:
 It would be super awesome to have something akin to a modify command that allowed changing the settings that are possible to set during upload but which don't seem to have a way to be modified later.

 For instance, I'd like to be able to set headers, switch to reduced redundancy, make public, etc. for JPGs that are already uploaded:

 	s3cmd modify \
 		--add-header='Cache-Control: public, max-age=31536000' \
 		--reduced-redundancy \
 		--cf-invalidate \
 		--acl-public \
 		--recursive \
 		--exclude '*' \
 		--include '*.jpg' \
 		'foo' \
 		s3://foo

 Unless I'm missing something these can be changed manually in the AWS Console, but not via s3cmd without a full delete and re-upload which may not be feasible.

 Thanks in advance and keep up the great work!

 ---
 Reply to this email directly or view it on GitHub:
 <a href="https://github.com/s3tools/s3cmd/issues/37">https://github.com/s3tools/s3cmd/issues/37</a>
</div>
</div>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/f449127a6da08207335f71a25daacc5f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4408435" class="js-comment comment" data-body-version="5168c5646e283fb504ef8a6bc5b9dfd3">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4408435" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/mckamey" class="comment-header-author">mckamey</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4408435">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4408435" class="comment-header-date"><time class="js-relative-date" datetime="2012-03-08T17:52:57-08:00" title="2012-03-08 17:52:57">March 08, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>Is there a way to do that in bulk? If it has to be done one at a time, I can do that in the AWS Console. I'd really love at the least the ability to add a new header without having to re-upload everything.</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/5c6197a71320d457e44a6405dcc26e18?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4408463" class="js-comment comment" data-body-version="a2e8f46ec1aaacadb28a0c2bf7b6b882">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4408463" class="comment-type-icon mini-icon mini-icon-read-note tooltipped downwards" title="This comment left via email reply."></a>
    <a href="/mludvig" class="comment-header-author">mludvig</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4408463">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4408463" class="comment-header-date"><time class="js-relative-date" datetime="2012-03-08T17:55:40-08:00" title="2012-03-08 17:55:40">March 08, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <div class="email-fragment">Try --recursive (or -r), i.e.</div>
<span class="email-hidden-toggle"><a href="#">&#8230;</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">s3cmd cp --acl-public s3://bucket/dir/ s3://bucket/dir/

Give it a try on a test bucket first and let me know :)

Michal</div>
<div class="email-quoted-reply">On 03/09/2012 02:52 PM, Stephen McKamey wrote:
 Is there a way to do that in bulk? If it has to be done one at a time, I can do that in the AWS Console. I'd really love at the least the ability to set a new header without having to re-upload everything.

 ---
 Reply to this email directly or view it on GitHub:
 <a href="https://github.com/s3tools/s3cmd/issues/37#issuecomment-4408435">https://github.com/s3tools/s3cmd/issues/37#issuecomment-4408435</a>
</div>
</div>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/f449127a6da08207335f71a25daacc5f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4408542" class="js-comment comment" data-body-version="0ba06875e6ab00050e15fff261cd1c0d">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4408542" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/mckamey" class="comment-header-author">mckamey</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4408542">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4408542" class="comment-header-date"><time class="js-relative-date" datetime="2012-03-08T18:04:09-08:00" title="2012-03-08 18:04:09">March 08, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>The messaging implied that it worked but using <code>mv</code> appears to have deleted all of the files in the directory:</p>

<pre><code>s3cmd mv --add-header='Cache-Control: public, max-age=31536000' --reduced-redundancy --cf-invalidate --acl-public --recursive s3://bucket/folder/ s3://bucket/folder/
</code></pre>

<p>I haven't tried <code>cp</code> yet...</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/5c6197a71320d457e44a6405dcc26e18?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4408587" class="js-comment comment" data-body-version="d592c3d2e30c560f0cdbbb5b4cbebc93">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4408587" class="comment-type-icon mini-icon mini-icon-read-note tooltipped downwards" title="This comment left via email reply."></a>
    <a href="/mludvig" class="comment-header-author">mludvig</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4408587">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4408587" class="comment-header-date"><time class="js-relative-date" datetime="2012-03-08T18:09:22-08:00" title="2012-03-08 18:09:22">March 08, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <div class="email-fragment">You did s3cmd 'mv' which copies and then deletes the source. Try 's3cmd
cp' instead.

M.</div>
<span class="email-hidden-toggle"><a href="#">&#8230;</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 03/09/2012 03:04 PM, Stephen McKamey wrote:
 The messaging implied that it worked but it appears to have deleted all of the files in the directory:

      s3cmd mv --add-header='Cache-Control: public, max-age=31536000' --reduced-redundancy --cf-invalidate --acl-public --recursive s3://bucket/folder/ s3://bucket/folder/

 ---
 Reply to this email directly or view it on GitHub:
 <a href="https://github.com/s3tools/s3cmd/issues/37#issuecomment-4408542">https://github.com/s3tools/s3cmd/issues/37#issuecomment-4408542</a>
</div>
</div>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/f449127a6da08207335f71a25daacc5f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4409699" class="js-comment comment" data-body-version="4d2a4f261c96cc8ceda171b491f57a94">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4409699" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/mckamey" class="comment-header-author">mckamey</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4409699">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4409699" class="comment-header-date"><time class="js-relative-date" datetime="2012-03-08T20:21:52-08:00" title="2012-03-08 20:21:52">March 08, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>I'm finally getting back around to this. I just tried using <code>cp</code> and it doesn't look like it works. On the plus side though it looks like maintained the attributes that were already applied. I was wondering if I'd have to respecify them.</p>

<p>It's possible that S3 detects that the source and target are the same and does a NOOP.</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/5c6197a71320d457e44a6405dcc26e18?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4409721" class="js-comment comment" data-body-version="a8477d63607a6faaf6f4ee33977df973">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4409721" class="comment-type-icon mini-icon mini-icon-read-note tooltipped downwards" title="This comment left via email reply."></a>
    <a href="/mludvig" class="comment-header-author">mludvig</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4409721">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4409721" class="comment-header-date"><time class="js-relative-date" datetime="2012-03-08T20:25:11-08:00" title="2012-03-08 20:25:11">March 08, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <div class="email-fragment">Not sure to be honest, try to cp it to another prefix and see (e.g.
s3://bucket/dir1/ -&gt; s3://bucket/dir2/). If it still won't work I'll
have to check the docs to see how it's supposed to work.

Michal</div>
<span class="email-hidden-toggle"><a href="#">&#8230;</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 03/09/2012 05:21 PM, Stephen McKamey wrote:
 I'm finally getting back around to this. I just tried using `cp` and it doesn't look like it works. On the plus side though it looks like maintained the attributes that were already applied. I was wondering if I'd have to respecify them.

 It's possible that S3 detects that the source and target are the same and does a NOOP.

 ---
 Reply to this email directly or view it on GitHub:
 <a href="https://github.com/s3tools/s3cmd/issues/37#issuecomment-4409699">https://github.com/s3tools/s3cmd/issues/37#issuecomment-4409699</a>
</div>
</div>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/f449127a6da08207335f71a25daacc5f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4409761" class="js-comment comment" data-body-version="798d092fff86e20a05d403e87d439adb">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4409761" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/mckamey" class="comment-header-author">mckamey</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4409761">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4409761" class="comment-header-date"><time class="js-relative-date" datetime="2012-03-08T20:30:49-08:00" title="2012-03-08 20:30:49">March 08, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>Copying seems to work great, it even keeps the headers. But it doesn't seem to respect the --add-header option:</p>

<pre><code>s3cmd cp --add-header='Cache-Control: public, max-age=31536000' --recursive s3://backet/dir1/ s3://bucket/dir2/
</code></pre>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/5c6197a71320d457e44a6405dcc26e18?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4409792" class="js-comment comment" data-body-version="12d2e3139a98537e8572fe9f3fd41843">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4409792" class="comment-type-icon mini-icon mini-icon-read-note tooltipped downwards" title="This comment left via email reply."></a>
    <a href="/mludvig" class="comment-header-author">mludvig</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4409792">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4409792" class="comment-header-date"><time class="js-relative-date" datetime="2012-03-08T20:35:13-08:00" title="2012-03-08 20:35:13">March 08, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <div class="email-fragment">That could well be a bug in s3cmd. Keen to have a look at it? Or
perhaps, should there be ";" instead of ","? I.e. "public; max-age=..."
instead of "public, max-age=..."?

M.</div>
<span class="email-hidden-toggle"><a href="#">&#8230;</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 03/09/2012 05:30 PM, Stephen McKamey wrote:
 Copying seems to work great, it even keeps the headers. But it doesn't seem to respect the --add-header option:

      s3cmd cp --add-header='Cache-Control: public, max-age=31536000' --recursive s3://backet/dir1/ s3://bucket/dir2/

 ---
 Reply to this email directly or view it on GitHub:
 <a href="https://github.com/s3tools/s3cmd/issues/37#issuecomment-4409761">https://github.com/s3tools/s3cmd/issues/37#issuecomment-4409761</a>
</div>
</div>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/424a8f03889e3ffbf9ed57adb1fc41cc?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4945704" class="js-comment comment" data-body-version="3e171abd40f652a84fbdc65dfb804274">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4945704" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/brandon-rhodes" class="comment-header-author">brandon-rhodes</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4945704">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4945704" class="comment-header-date"><time class="js-relative-date" datetime="2012-04-03T18:31:47-07:00" title="2012-04-03 18:31:47">April 03, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>I am getting an S3 error when I attempt to "cp" an object to itself with or without an "--add-header" option:</p>

<pre><code>
$ s3cmd cp -P --add-header="Cache-Control: max-age=86400"  s3://bucket/foo.jpg s3://bucket/foo.jpg

ERROR: S3 error: 400 (InvalidRequest): This copy request is illegal because it is trying to copy an object to itself without changing the object's metadata, storage class or encryption attributes.
</code></pre>

<p>Oh, it will be painful if I have to re-install all of these gigabytes of content just because I didn't know to set a Cache-Control header the first time around. Thanks for s3cmd, though, it has otherwise been an INCREDIBLE timesaver and tool!</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/424a8f03889e3ffbf9ed57adb1fc41cc?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4945763" class="js-comment comment" data-body-version="233823ebbeb0fb1fb80c6a07b36b2cf6">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4945763" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/brandon-rhodes" class="comment-header-author">brandon-rhodes</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4945763">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4945763" class="comment-header-date"><time class="js-relative-date" datetime="2012-04-03T18:38:54-07:00" title="2012-04-03 18:38:54">April 03, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>A bigger problem: even copying the resource to a new name does not make a new header appear.</p>

<pre><code>$ s3cmd cp -P --add-header="Cache-Control: max-age=86400"  s3://bucket/foo.jpg s3://bucket/foo2.jpg
</code></pre>

<p>Downloading foo2.jpg does not show any additional headers beyond the ones that Amazon provides by default. I should note that doing a completely fresh "put" to a non-existent URL <strong>does</strong> cause the header to appear, <strong>as does</strong> doing the "put" to the already-existing resource so that you overwrite it.</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/f449127a6da08207335f71a25daacc5f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-4958532" class="js-comment comment" data-body-version="658528fb2247b9e86f77b8f560088161">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-4958532" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/mckamey" class="comment-header-author">mckamey</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-4958532">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-4958532" class="comment-header-date"><time class="js-relative-date" datetime="2012-04-04T10:22:09-07:00" title="2012-04-04 10:22:09">April 04, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>It sounds like <a href="https://github.com/brandon-rhodes" class="user-mention">@brandon-rhodes</a> has the same use case I do. I haven't had a chance to dig into s3cmd code but it does seem like there needs to be a tweak in the <code>s3cmd cp</code> command to support this.</p>

<p>To answer the question <a href="https://github.com/mludvig" class="user-mention">@mludvig</a> raised of a comma vs. semi-colon, the comma is correct syntax for extensions according to the HTTP/1.1 RFC:</p>

<pre><code>http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.6
</code></pre>

<p>Regardless, I don't believe the content of the header shouldn't affect whether the header is set or not. I believe S3 filters by header name.</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/97667222bc99d7d3591d9c6695b31129?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-8255890" class="js-comment comment" data-body-version="f88bda83ce31470195081411f816b465">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-8255890" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/willrc" class="comment-header-author">willrc</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-8255890">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-8255890" class="comment-header-date"><time class="js-relative-date" datetime="2012-09-04T01:27:21-07:00" title="2012-09-04 01:27:21">September 04, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>For some reason getting this to work via python subprocess took a lot of fiddling.  I though it might be helpful to post what worked:</p>

<p>'--add-header=Cache-Control:public;max-age=31536000'</p>

<p>Note: semicolon, no spaces.  Any other settings cause s3cmd to complain when called via subprocess (though it works fine from the command line).</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/48f306c887fd9c7b32a2fc352194e0db?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-8517163" class="js-comment comment" data-body-version="6164d0f720725c457fc769ff33c2d566">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-8517163" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/Valloric" class="comment-header-author">Valloric</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-8517163">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-8517163" class="comment-header-date"><time class="js-relative-date" datetime="2012-09-12T20:13:59-07:00" title="2012-09-12 20:13:59">September 12, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>I have the exact same use case as the other people here; I want to just add headers to files that are already in my bucket on s3. A <code>modify</code> command sounds like the cleanest approach from a usability perspective since the mental model for <code>cp</code> would not need to be changed ("oh, I can also modify a file's metadata with cp too if I copy a file to itself? Weird...").</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/a3ca0e247f3af73db7578f66a070992a?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-10013076" class="js-comment comment" data-body-version="2829dddf72f096f9c8c6935950d3ade5">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-10013076" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/andreteves" class="comment-header-author">andreteves</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-10013076">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-10013076" class="comment-header-date"><time class="js-relative-date" datetime="2012-11-02T05:42:56-07:00" title="2012-11-02 05:42:56">November 02, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>+1 for this feature</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/4de376afde67e9426673e4b2d639b034?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-11072209" class="js-comment comment" data-body-version="324f09202f1d9a2268813132985abd56">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-11072209" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/fgaudin" class="comment-header-author">fgaudin</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-11072209">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-11072209" class="comment-header-date"><time class="js-relative-date" datetime="2012-12-05T19:48:18-08:00" title="2012-12-05 19:48:18">December 05, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>here is a patch to make it work <a href="https://github.com/s3tools/s3cmd/issues/94" class="issue-link" title="Allow to set cache-control header by self-copying">#94</a>, you also have to define the content-type</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/9f80cac7135e1748d308b04e89e8bc15?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-11171105" class="js-comment comment" data-body-version="b3f3235d61bef5ae5f431e9acf2f482d">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-11171105" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/tszming" class="comment-header-author">tszming</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-11171105">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-11171105" class="comment-header-date"><time class="js-relative-date" datetime="2012-12-09T05:41:40-08:00" title="2012-12-09 05:41:40">December 09, 2012</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>I agree this feature is useful, and for those who need now, consider using a script like this: <a href="http://amix.dk/blog/post/19687">http://amix.dk/blog/post/19687</a></p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/c8f164c8152127a9529404a356a9c67b?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-12033379" class="js-comment comment" data-body-version="e363df72e99525f195256cdf4ace3328">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-12033379" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/gollyg" class="comment-header-author">gollyg</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-12033379">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-12033379" class="comment-header-date"><time class="js-relative-date" datetime="2013-01-08T22:35:27-08:00" title="2013-01-08 22:35:27">January 08, 2013</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>I think that one of the issues here is that s3cmd is hard coding in a header in line 414 of S3.py. This header sets the x-amz-metadata-directive to COPY (there is a TODO to turn this to a switch). From S3 documentation:</p>

<blockquote>
<p>Constraints: Values other than COPY or REPLACE result in an immediate 400-based error response. You cannot copy an object to itself unless the MetadataDirective header is specified and its value set to REPLACE.</p>
</blockquote>

<p><a href="http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectCOPY.html">http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectCOPY.html</a></p>

<p>So I don't think that the final request is actually configured correctly. Manually adding this header does not overwrite the default value.</p>

<p>I have hacked on that file, and successfully run a batch script that recursively changes 400,000 images from application/octet to application/jpeg. But the todo idea of adding a switch is needed for release code.</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/a66100b528e01781b6eee8914f11667f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-15208159" class="js-comment comment" data-body-version="4dae19b249b2945de14b92fbcf5e134b">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-15208159" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/luk3thomas" class="comment-header-author">luk3thomas</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-15208159">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-15208159" class="comment-header-date"><time class="js-relative-date" datetime="2013-03-20T15:34:40-07:00" title="2013-03-20 15:34:40">March 20, 2013</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>+1 for this as well</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/b0d7b5d81cbc846b99976fbf3852d932?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-15429251" class="js-comment comment" data-body-version="ad8d66fa8c06d969c4cec2af2e4f3e08">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-15429251" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/johnboxall" class="comment-header-author">johnboxall</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-15429251">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-15429251" class="comment-header-date"><time class="js-relative-date" datetime="2013-03-25T15:16:49-07:00" title="2013-03-25 15:16:49">March 25, 2013</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>From website redirects, I used the following pattern:</p>

<pre><code>s3cmd -c .s3cfg put dummy/index.html s3://bucket/from/ -P --add-header="x-amz-website-redirect-location:/to/"
</code></pre>

<p>Make a dummy file <code>dummy/index.html</code> and upload that - set a redirect on it boom!</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <img class="discussion-bubble-avatar" height="48" src="https://secure.gravatar.com/avatar/e995cc033a946947e33699751b90783f?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" />
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        
<div id="issuecomment-16300728" class="js-comment comment" data-body-version="739ba882292169b4b0927620273362d1">
  <div class="comment-header normal-comment-header">
        <a href="#issuecomment-16300728" class="comment-type-icon mini-icon mini-icon-commit-comment"></a>
    <a href="/ShepBook" class="comment-header-author">ShepBook</a>
    <span class='comment-header-action-text'>
      <a href="#issuecomment-16300728">
      commented
      </a>
    </span>

    <span class="comment-header-right">
      <a href="#issuecomment-16300728" class="comment-header-date"><time class="js-relative-date" datetime="2013-04-12T08:51:43-07:00" title="2013-04-12 08:51:43">April 12, 2013</time></a>
    </span>
  </div> <!-- /.comment-header -->


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="js-comment-body comment-body markdown-body">
          <p>+1 from me as well. I could use this exact ability right about now. :)</p>
      </div>
    </div>
  </div> <!-- /.comment-content -->
</div> <!-- /.comment -->

      </div>
    </div>
  </div><!-- /.discussion-bubble -->




        </div>

          <div class="signed-out-comment">
	<a href="/signup/free" class="minibutton btn-default green" rel="nofollow">Sign up for free</a>
	<strong>to join this discussion on GitHub</strong>.
	Already have an account?
	<a href="/login?return_to=%2Fs3tools%2Fs3cmd%2Fissues%2F37" rel="nofollow">Sign in to comment</a>
</div>


        


      </div><!-- /.discussion-timeline -->

    </div><!-- /#discussion_bucket -->
    <div class="clear"></div>
  </div>

</div>


        </div>
      </div>
      <div class="context-overlay"></div>
    </div>

      <div id="footer-push"></div><!-- hack for sticky footer -->
    </div><!-- end of wrapper - hack for sticky footer -->

      <!-- footer -->
      <div id="footer">
  <div class="container clearfix">

      <dl class="footer_nav">
        <dt>GitHub</dt>
        <dd><a href="https://github.com/about">About us</a></dd>
        <dd><a href="https://github.com/blog">Blog</a></dd>
        <dd><a href="https://github.com/contact">Contact &amp; support</a></dd>
        <dd><a href="http://enterprise.github.com/">GitHub Enterprise</a></dd>
        <dd><a href="http://status.github.com/">Site status</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>Applications</dt>
        <dd><a href="http://mac.github.com/">GitHub for Mac</a></dd>
        <dd><a href="http://windows.github.com/">GitHub for Windows</a></dd>
        <dd><a href="http://eclipse.github.com/">GitHub for Eclipse</a></dd>
        <dd><a href="http://mobile.github.com/">GitHub mobile apps</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>Services</dt>
        <dd><a href="http://get.gaug.es/">Gauges: Web analytics</a></dd>
        <dd><a href="http://speakerdeck.com">Speaker Deck: Presentations</a></dd>
        <dd><a href="https://gist.github.com">Gist: Code snippets</a></dd>
        <dd><a href="http://jobs.github.com/">Job board</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>Documentation</dt>
        <dd><a href="http://help.github.com/">GitHub Help</a></dd>
        <dd><a href="http://developer.github.com/">Developer API</a></dd>
        <dd><a href="http://github.github.com/github-flavored-markdown/">GitHub Flavored Markdown</a></dd>
        <dd><a href="http://pages.github.com/">GitHub Pages</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>More</dt>
        <dd><a href="http://training.github.com/">Training</a></dd>
        <dd><a href="https://github.com/edu">Students &amp; teachers</a></dd>
        <dd><a href="http://shop.github.com">The Shop</a></dd>
        <dd><a href="/plans">Plans &amp; pricing</a></dd>
        <dd><a href="http://octodex.github.com/">The Octodex</a></dd>
      </dl>

      <hr class="footer-divider">


    <p class="right">&copy; 2013 <span title="0.11345s from fe17.rs.github.com">GitHub</span>, Inc. All rights reserved.</p>
    <a class="left" href="https://github.com/">
      <span class="mega-icon mega-icon-invertocat"></span>
    </a>
    <ul id="legal">
        <li><a href="https://github.com/site/terms">Terms of Service</a></li>
        <li><a href="https://github.com/site/privacy">Privacy</a></li>
        <li><a href="https://github.com/security">Security</a></li>
    </ul>

  </div><!-- /.container -->

</div><!-- /.#footer -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
          <div class="suggester-container">
              <div class="suggester fullscreen-suggester js-navigation-container" id="fullscreen_suggester"
                 data-url="/s3tools/s3cmd/suggestions/commit">
              </div>
          </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped leftwards" title="Exit Zen Mode">
      <span class="mega-icon mega-icon-normalscreen"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped leftwards"
      title="Switch themes">
      <span class="mini-icon mini-icon-brightness"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="mini-icon mini-icon-exclamation"></span>
      Something went wrong with that request. Please try again.
      <a href="#" class="mini-icon mini-icon-remove-close ajax-error-dismiss"></a>
    </div>

    
    
    <span id='server_response_time' data-time='0.11461' data-host='fe17'></span>
    
  </body>
</html>

